/** gifler.js | github.com/themadcreator/gifler | @license: Apache-2.0 */
!function e(t,r,n){
    function i(o,s){
        if(!r[o]){
            if(!t[o]){
                var h="function"==typeof require&&require;
                if(!s&&h) return h(o,!0);
                if(a) return a(o,!0);
                var f=new Error("Cannot find module '"+o+"'");
                throw f.code="MODULE_NOT_FOUND",f
            }
            var u=r[o]={exports:{}};
            t[o][0].call(u.exports,function(e){
                var r=t[o][1][e];
                return i(r?r:e)
            },u,u.exports,e,t,r,n)
        }
        return r[o].exports
    }
    for(var a="function"==typeof require&&require,o=0;o<n.length;o++) i(n[o]);
    return i
}({
    1: [function(e,t,r){
        function n(e,t,r,n){
            function a(e){
                var t=e.length;
                if(2>t||t>256||t&t-1) throw "Invalid code/color length, must be power of 2 and 2 .. 256.";
                return t
            }
            var o=0,n=void 0===n?{}:n,s=void 0===n.loop?null:n.loop,h=void 0===n.palette?null:n.palette;
            if(0>=t||0>=r||t>65535||r>65535) throw "Width/Height invalid.";
            e[o++]=71,e[o++]=73,e[o++]=70,e[o++]=56,e[o++]=57,e[o++]=97;
            var f=0,u=0;
            if(null!==h){
                for(var l=a(h);l>>=1;++f);
                if(l=1<<f,--f,void 0!==n.background){
                    if(u=n.background,u>=l) throw "Background index out of range.";
                    if(0===u) throw "Background index explicitly passed as 0."
                }
            }
            e[o++]=255&t,e[o++]=t>>8&255,e[o++]=255&r,e[o++]=r>>8&255,e[o++]=(null!==h?128:0)|f,e[o++]=u,e[o++]=0;
            if(null!==h)
                for(var d=0,c=h.length;c>d;++d){
                    var p=h[d];
                    e[o++]=p>>16&255,e[o++]=p>>8&255,e[o++]=255&p
                }
            if(null!==s){
                if(0>s||s>65535) throw "Loop count invalid.";
                e[o++]=33,e[o++]=255,e[o++]=11,e[o++]=78,e[o++]=69,e[o++]=84,e[o++]=83,e[o++]=67,e[o++]=65,e[o++]=80,e[o++]=69,e[o++]=50,e[o++]=46,e[o++]=48,e[o++]=3,e[o++]=1,e[o++]=255&s,e[o++]=s>>8&255,e[o++]=0
            }
            var v=!1;
            this.addFrame=function(t,r,n,s,f,u){
                if(v===!0&&( --o,v=!1),u=void 0===u?{}:u,0>t||0>r||t>65535||r>65535) throw "x/y invalid.";
                if(0>=n||0>=s||n>65535||s>65535) throw "Width/Height invalid.";
                if(f.length<n*s) throw "Not enough pixels for the frame size.";
                var l=!0,d=u.palette;
                if((void 0===d||null===d)&&(l=!1,d=h),void 0===d||null===d) throw "Must supply either a local or global palette.";
                for(var c=a(d),p=0;c>>=1;++p);
                c=1<<p;
                var m=void 0===u.delay?0:u.delay,g=void 0===u.disposal?0:u.disposal;
                if(0>g||g>3) throw "Disposal out of range.";
                var _=!1,w=0;
                if(void 0!==u.transparent&&null!==u.transparent&&(_=!0,w=u.transparent,0>w||w>=c)) throw "Transparent color index.";
                if((0!==g||_||0!==m)&&(e[o++]=33,e[o++]=249,e[o++]=4,e[o++]=g<<2|(_===!0?1:0),e[o++]=255&m,e[o++]=m>>8&255,e[o++]=w,e[o++]=0),e[o++]=44,e[o++]=255&t,e[o++]=t>>8&255,e[o++]=255&r,e[o++]=r>>8&255,e[o++]=255&n,e[o++]=n>>8&255,e[o++]=255&s,e[o++]=s>>8&255,e[o++]=l===!0?128|p-1:0,l===!0)
                    for(var x=0,y=d.length;y>x;++x){
                        var F=d[x];
                        e[o++]=F>>16&255,e[o++]=F>>8&255,e[o++]=255&F
                    }
                o=i(e,o,2>p?2:p,f)
            },this.end=function(){
                return v===!1&&(e[o++]=59,v=!0),o
            }
        }
        function i(e,t,r,n){
            function i(r){
                for(;d>=r;)e[t++]=255&c,c>>=8,d-=8,t===o+256&&(e[o]=255,o=t++)
            }
            function a(e){
                c|=e<<d,d+=l,i(8)
            }
            e[t++]=r;
            var o=t++,s=1<<r,h=s-1,f=s+1,u=f+1,l=r+1,d=0,c=0,p=n[0]&h,v={};
            a(s);
            for(var m=1,g=n.length;g>m;++m){
                var _=n[m]&h,w=p<<8|_,x=v[w];
                if(void 0===x){
                    for(c|=p<<d,d+=l;d>=8;)e[t++]=255&c,c>>=8,d-=8,t===o+256&&(e[o]=255,o=t++);
                    4096===u?(a(s),u=f+1,l=r+1,v={}):(u>=1<<l&&++l,v[w]=u++)
                    p=_
                }
                else p=x
            }
            return a(p),a(f),i(1),o+1===t?e[o]=0:(e[o]=t-o-1,e[t++]=0),t
        }
        function a(e){
            var t=0;
            if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!==(e[t++]+1&253)||97!==e[t++]) throw "Invalid GIF 87a/89a header.";
            var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,i=e[t++],a=i>>7,s=7&i,h=1<<s+1;
            e[t++];e[t++];var f=null;a&&(f=t,t+=3*h);var u=!0,l=[],d=0,c=null,p=0,v=null;
            for(this.width=r,this.height=n;u&&t<e.length;) switch(e[t++]){
                case 33:
                    switch(e[t++]){
                        case 255:
                            if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16]) t+=14,v=e[t++]|e[t++]<<8,t++;
                            else for(t+=12;;){
                                var m=e[t++];
                                if(0===m) break;
                                t+=m
                            }
                            break;
                        case 249:
                            if(4!==e[t++]||0!==e[t+4]) throw "Invalid graphics extension block.";
                            var g=e[t++];
                            d=e[t++]|e[t++]<<8,c=e[t++],0===(1&g)&&(c=null),p=g>>2&7,t++;
                            break;
                        case 254:
                            for(;;){
                                var m=e[t++];
                                if(0===m) break;
                                t+=m
                            }
                            break;
                        default:
                            throw "Unknown graphic control label: 0x"+e[t-1].toString(16)
                    }
                    break;
                case 44:
                    var _=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,F=e[t++],b=F>>7,I=F>>6&1,k=7&F,C=1<<k+1,A=f,D=!1;
                    if(b){
                        var D=!0;
                        A=t,t+=3*C
                    }
                    var R=t;
                    for(t++;;){
                        var m=e[t++];
                        if(0===m) break;
                        t+=m
                    }
                    l.push({x:_,y:w,width:x,height:y,has_local_palette:D,palette_offset:A,data_offset:R,data_length:t-R,transparent_index:c,interlaced:!!I,delay:d,disposal:p});
                    break;
                case 59:
                    u=!1;
                    break;
                default:
                    throw "Unknown gif block: 0x"+e[t-1].toString(16)
            }
            this.numFrames=function(){
                return l.length
            },this.loopCount=function(){
                return v
            },this.frameInfo=function(e){
                if(0>e||e>=l.length) throw "Frame index out of range.";
                return l[e]
            },this.decodeAndBlitFrameBGRA=function(t,n){
                var i=this.frameInfo(t),a=i.width*i.height,s=new Uint8Array(a);
                o(e,i,R)
            }
        }
    }, {}]
}, {}, [1]);
